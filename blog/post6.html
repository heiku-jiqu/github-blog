<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" href="/github-blog/favicon.png" />
		<meta name="viewport" content="width=device-width" />
		<meta http-equiv="content-security-policy" content=""><link href="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css" rel="stylesheet" data-svelte="svelte-uyunbu">
	<link href="/github-blog/_app/immutable/assets/_layout-ea247da7.css" rel="stylesheet">
	<link href="/github-blog/_app/immutable/assets/_page-5446419d.css" rel="stylesheet">
	<link href="/github-blog/_app/immutable/assets/post2-596b4ea1.css" rel="stylesheet">
	<link href="/github-blog/_app/immutable/assets/post7-a4591204.css" rel="stylesheet">
	<link rel="modulepreload" href="/github-blog/_app/immutable/start-d3b949e2.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/preload-helper-aa6bc0ce.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/index-4cbca6b4.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/singletons-19873c9a.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/paths-6cd3a76e.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/components/pages/_layout.svelte-a0552754.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/index-6d9ae0b7.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/modules/pages/_layout.js-edc6bf67.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/_layout-a4fc2e89.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/components/pages/blog/_blogpost_/_page.svelte-58e879a6.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/modules/pages/blog/_blogpost_/_page.js-299bbfbf.js">
	<link rel="modulepreload" href="/github-blog/_app/immutable/chunks/_page-ee88879f.js">
	</head>
	<body>
		<div>




<header class="svelte-qm05bo"><a href="/github-blog/" class="svelte-qm05bo">Home</a>

	<nav><ul class="svelte-qm05bo"><li><a href="/github-blog/blog" class="svelte-qm05bo">Blog</a></li>
			<li><a href="/github-blog/about" class="svelte-qm05bo">About</a></li></ul></nav>
</header>
<div><div class="grid-container svelte-14l03dd"><div class="sides"></div>
		<div class="article svelte-14l03dd"><h1>Converting Coordinates to Different Coordinate System</h1>
<h2>Motivation</h2>
<p>Javascript DOM events lets you capture mouse position relative to top left corner of your viewport through <code>clientX</code>/<code>clientY</code> event properties.</p>
<p>If you are drawing SVGs and need to position SVG elements in on the mouse pointer, you will need to convert the coordinates given by <code>clientX</code>/<code>clientY</code> into the SVGâ€™s coordinates.</p>
<h2>Solution</h2>
<p>You will need 3 things: - The <code>clientX</code> and <code>clientY</code> properties from the <code>MouseEvent</code> - A <code>DOMPoint</code> object created using <code>DOMPoint()</code>, or <code>SVGPoint</code> object - Reference to the <code>&lt;svg&gt;</code> node</p>
<pre class="language-js"><!-- HTML_TAG_START --><code class="language-js"><span class="token comment">// Create a new DOMPoint object with clientX and clientY as its x and y coordinate</span>
<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token function">DOMPoint</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Create a DOMMatrix that transforms screen coordinates to SVG coordinates</span>
<span class="token keyword">let</span> transform_matrix <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">getScreenCTM</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use the matrix in DOMPoint.matrixTransform()</span>
<span class="token keyword">let</span> new_point <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">matrixTransform</span><span class="token punctuation">(</span>transform_matrix<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>new_point<span class="token punctuation">.</span>x<span class="token punctuation">,</span> new_point<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span></code><!-- HTML_TAG_END --></pre>
<p><code>CTM</code> stands for Current Transformation Matrix, and maps the local coordinate system into the viewport coordinate system. However, since we want the opposite, we have to call <code>.inverse()</code> to inverse the matrix to get the opposite effect.</p></div>
		<div class="sides"></div></div></div>


		<script type="module" data-sveltekit-hydrate="17np7e4">
		import { start } from "/github-blog/_app/immutable/start-d3b949e2.js";

		start({
			env: {},
			hydrate: {
				status: 200,
				error: null,
				node_ids: [0, 5],
				params: {blogpost:"post6"},
				routeId: "blog/[blogpost]",
				data: (function(a){return [a,a]}(null)),
				form: null
			},
			paths: {"base":"/github-blog","assets":"/github-blog"},
			target: document.querySelector('[data-sveltekit-hydrate="17np7e4"]').parentNode,
			trailing_slash: "never"
		});
	</script>
	</div>
	</body>
</html>
