import{S as no,i as ro,s as ao,L as ko,e as ve,b as w,M as So,f as ge,A as P,h as s,N as U,O as X,m as g,n as M,B as o,K as ha,q as h,r as d,G as io,H as oo,P as Di,Q as No,k as b,a as S,v as $o,l as y,c as N,w as Do,x as Io,t as Go,y as Oo}from"./index-67ec3149.js";import{a as Vo,f as Co}from"./index-60abbcb6.js";function xn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function To(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lo(e){let t,n,r;e.length!==2?(t=xn,n=(f,v)=>xn(e(f),v),r=(f,v)=>e(f)-v):(t=e===xn||e===To?e:Po,n=e,r=e);function a(f,v,p=0,m=f.length){if(p<m){if(t(v,v)!==0)return m;do{const x=p+m>>>1;n(f[x],v)<0?p=x+1:m=x}while(p<m)}return p}function l(f,v,p=0,m=f.length){if(p<m){if(t(v,v)!==0)return m;do{const x=p+m>>>1;n(f[x],v)<=0?p=x+1:m=x}while(p<m)}return p}function c(f,v,p=0,m=f.length){const x=a(f,v,p,m-1);return x>p&&r(f[x-1],v)>-r(f[x],v)?x-1:x}return{left:a,center:c,right:l}}function Po(){return 0}function Lo(e){return e===null?NaN:+e}const Ho=lo(xn),Ro=Ho.right;lo(Lo).center;const zo=Ro;class Ii extends Map{constructor(t,n=jo){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Gi(this,t))}has(t){return super.has(Gi(this,t))}set(t,n){return super.set(Ao(this,t),n)}delete(t){return super.delete(Bo(this,t))}}function Gi({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Ao({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Bo({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function jo(e){return e!==null&&typeof e=="object"?e.valueOf():e}var pa=Math.sqrt(50),ga=Math.sqrt(10),va=Math.sqrt(2);function qo(e,t,n){var r,a=-1,l,c,f;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(l=e,e=t,t=l),(f=so(e,t,n))===0||!isFinite(f))return[];if(f>0){let v=Math.round(e/f),p=Math.round(t/f);for(v*f<e&&++v,p*f>t&&--p,c=new Array(l=p-v+1);++a<l;)c[a]=(v+a)*f}else{f=-f;let v=Math.round(e*f),p=Math.round(t*f);for(v/f<e&&++v,p/f>t&&--p,c=new Array(l=p-v+1);++a<l;)c[a]=(v+a)/f}return r&&c.reverse(),c}function so(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),l=r/Math.pow(10,a);return a>=0?(l>=pa?10:l>=ga?5:l>=va?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(l>=pa?10:l>=ga?5:l>=va?2:1)}function Fo(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),l=r/a;return l>=pa?a*=10:l>=ga?a*=5:l>=va&&(a*=2),t<e?-a:a}function Wo(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(a);++r<a;)l[r]=e+r*n;return l}function wa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const Oi=Symbol("implicit");function fo(){var e=new Ii,t=[],n=[],r=Oi;function a(l){let c=e.get(l);if(c===void 0){if(r!==Oi)return r;e.set(l,c=t.push(l)-1)}return n[c%n.length]}return a.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new Ii;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return a},a.range=function(l){return arguments.length?(n=Array.from(l),a):n.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.copy=function(){return fo(t,n).unknown(r)},wa.apply(a,arguments),a}function uo(){var e=fo().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,l,c,f=!1,v=0,p=0,m=.5;delete e.unknown;function x(){var u=t().length,E=a<r,D=E?a:r,V=E?r:a;l=(V-D)/Math.max(1,u-v+p*2),f&&(l=Math.floor(l)),D+=(V-D-l*(u-v))*m,c=l*(1-v),f&&(D=Math.round(D),c=Math.round(c));var C=Wo(u).map(function($){return D+l*$});return n(E?C.reverse():C)}return e.domain=function(u){return arguments.length?(t(u),x()):t()},e.range=function(u){return arguments.length?([r,a]=u,r=+r,a=+a,x()):[r,a]},e.rangeRound=function(u){return[r,a]=u,r=+r,a=+a,f=!0,x()},e.bandwidth=function(){return c},e.step=function(){return l},e.round=function(u){return arguments.length?(f=!!u,x()):f},e.padding=function(u){return arguments.length?(v=Math.min(1,p=+u),x()):v},e.paddingInner=function(u){return arguments.length?(v=Math.min(1,u),x()):v},e.paddingOuter=function(u){return arguments.length?(p=+u,x()):p},e.align=function(u){return arguments.length?(m=Math.max(0,Math.min(1,u)),x()):m},e.copy=function(){return uo(t(),[r,a]).round(f).paddingInner(v).paddingOuter(p).align(m)},wa.apply(x(),arguments)}function _a(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function co(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Rt(){}var Pt=.7,bn=1/Pt,Fe="\\s*([+-]?\\d+)\\s*",Lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Uo=/^#([0-9a-f]{3,8})$/,Xo=new RegExp(`^rgb\\(${Fe},${Fe},${Fe}\\)$`),Yo=new RegExp(`^rgb\\(${oe},${oe},${oe}\\)$`),Ko=new RegExp(`^rgba\\(${Fe},${Fe},${Fe},${Lt}\\)$`),Qo=new RegExp(`^rgba\\(${oe},${oe},${oe},${Lt}\\)$`),Zo=new RegExp(`^hsl\\(${Lt},${oe},${oe}\\)$`),Jo=new RegExp(`^hsla\\(${Lt},${oe},${oe},${Lt}\\)$`),Vi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_a(Rt,Ht,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Ci,formatHex:Ci,formatHex8:el,formatHsl:tl,formatRgb:Ti,toString:Ti});function Ci(){return this.rgb().formatHex()}function el(){return this.rgb().formatHex8()}function tl(){return ho(this).formatHsl()}function Ti(){return this.rgb().formatRgb()}function Ht(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Uo.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Pi(t):n===3?new A(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Xo.exec(e))?new A(t[1],t[2],t[3],1):(t=Yo.exec(e))?new A(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ko.exec(e))?pn(t[1],t[2],t[3],t[4]):(t=Qo.exec(e))?pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Zo.exec(e))?Ri(t[1],t[2]/100,t[3]/100,1):(t=Jo.exec(e))?Ri(t[1],t[2]/100,t[3]/100,t[4]):Vi.hasOwnProperty(e)?Pi(Vi[e]):e==="transparent"?new A(NaN,NaN,NaN,0):null}function Pi(e){return new A(e>>16&255,e>>8&255,e&255,1)}function pn(e,t,n,r){return r<=0&&(e=t=n=NaN),new A(e,t,n,r)}function nl(e){return e instanceof Rt||(e=Ht(e)),e?(e=e.rgb(),new A(e.r,e.g,e.b,e.opacity)):new A}function xa(e,t,n,r){return arguments.length===1?nl(e):new A(e,t,n,r==null?1:r)}function A(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}_a(A,xa,co(Rt,{brighter(e){return e=e==null?bn:Math.pow(bn,e),new A(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pt:Math.pow(Pt,e),new A(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new A(De(this.r),De(this.g),De(this.b),yn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Li,formatHex:Li,formatHex8:rl,formatRgb:Hi,toString:Hi}));function Li(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}`}function rl(){return`#${$e(this.r)}${$e(this.g)}${$e(this.b)}${$e((isNaN(this.opacity)?1:this.opacity)*255)}`}function Hi(){const e=yn(this.opacity);return`${e===1?"rgb(":"rgba("}${De(this.r)}, ${De(this.g)}, ${De(this.b)}${e===1?")":`, ${e})`}`}function yn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function De(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function $e(e){return e=De(e),(e<16?"0":"")+e.toString(16)}function Ri(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Y(e,t,n,r)}function ho(e){if(e instanceof Y)return new Y(e.h,e.s,e.l,e.opacity);if(e instanceof Rt||(e=Ht(e)),!e)return new Y;if(e instanceof Y)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,f=l-a,v=(l+a)/2;return f?(t===l?c=(n-r)/f+(n<r)*6:n===l?c=(r-t)/f+2:c=(t-n)/f+4,f/=v<.5?l+a:2-l-a,c*=60):f=v>0&&v<1?0:c,new Y(c,f,v,e.opacity)}function al(e,t,n,r){return arguments.length===1?ho(e):new Y(e,t,n,r==null?1:r)}function Y(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}_a(Y,al,co(Rt,{brighter(e){return e=e==null?bn:Math.pow(bn,e),new Y(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pt:Math.pow(Pt,e),new Y(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new A(da(e>=240?e-240:e+120,a,r),da(e,a,r),da(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new Y(zi(this.h),gn(this.s),gn(this.l),yn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yn(this.opacity);return`${e===1?"hsl(":"hsla("}${zi(this.h)}, ${gn(this.s)*100}%, ${gn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function zi(e){return e=(e||0)%360,e<0?e+360:e}function gn(e){return Math.max(0,Math.min(1,e||0))}function da(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ea=e=>()=>e;function il(e,t){return function(n){return e+n*t}}function ol(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function ll(e){return(e=+e)==1?mo:function(t,n){return n-t?ol(t,n,e):Ea(isNaN(t)?n:t)}}function mo(e,t){var n=t-e;return n?il(e,n):Ea(isNaN(e)?t:e)}const Ai=function e(t){var n=ll(t);function r(a,l){var c=n((a=xa(a)).r,(l=xa(l)).r),f=n(a.g,l.g),v=n(a.b,l.b),p=mo(a.opacity,l.opacity);return function(m){return a.r=c(m),a.g=f(m),a.b=v(m),a.opacity=p(m),a+""}}return r.gamma=e,r}(1);function sl(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(l){for(a=0;a<n;++a)r[a]=e[a]*(1-l)+t[a]*l;return r}}function fl(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ul(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),l=new Array(n),c;for(c=0;c<r;++c)a[c]=Ma(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(f){for(c=0;c<r;++c)l[c]=a[c](f);return l}}function cl(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wn(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hl(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=Ma(e[a],t[a]):r[a]=t[a];return function(l){for(a in n)r[a]=n[a](l);return r}}var ba=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ma=new RegExp(ba.source,"g");function dl(e){return function(){return e}}function ml(e){return function(t){return e(t)+""}}function pl(e,t){var n=ba.lastIndex=ma.lastIndex=0,r,a,l,c=-1,f=[],v=[];for(e=e+"",t=t+"";(r=ba.exec(e))&&(a=ma.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),f[c]?f[c]+=l:f[++c]=l),(r=r[0])===(a=a[0])?f[c]?f[c]+=a:f[++c]=a:(f[++c]=null,v.push({i:c,x:wn(r,a)})),n=ma.lastIndex;return n<t.length&&(l=t.slice(n),f[c]?f[c]+=l:f[++c]=l),f.length<2?v[0]?ml(v[0].x):dl(t):(t=v.length,function(p){for(var m=0,x;m<t;++m)f[(x=v[m]).i]=x.x(p);return f.join("")})}function Ma(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ea(t):(n==="number"?wn:n==="string"?(r=Ht(t))?(t=r,Ai):pl:t instanceof Ht?Ai:t instanceof Date?cl:fl(t)?sl:Array.isArray(t)?ul:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hl:wn)(e,t)}function gl(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function vl(e){return function(){return e}}function xl(e){return+e}var Bi=[0,1];function qe(e){return e}function ya(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:vl(isNaN(t)?NaN:.5)}function bl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function yl(e,t,n){var r=e[0],a=e[1],l=t[0],c=t[1];return a<r?(r=ya(a,r),l=n(c,l)):(r=ya(r,a),l=n(l,c)),function(f){return l(r(f))}}function wl(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),l=new Array(r),c=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<r;)a[c]=ya(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(f){var v=zo(e,f,1,r)-1;return l[v](a[v](f))}}function _l(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function El(){var e=Bi,t=Bi,n=Ma,r,a,l,c=qe,f,v,p;function m(){var u=Math.min(e.length,t.length);return c!==qe&&(c=bl(e[0],e[u-1])),f=u>2?wl:yl,v=p=null,x}function x(u){return u==null||isNaN(u=+u)?l:(v||(v=f(e.map(r),t,n)))(r(c(u)))}return x.invert=function(u){return c(a((p||(p=f(t,e.map(r),wn)))(u)))},x.domain=function(u){return arguments.length?(e=Array.from(u,xl),m()):e.slice()},x.range=function(u){return arguments.length?(t=Array.from(u),m()):t.slice()},x.rangeRound=function(u){return t=Array.from(u),n=gl,m()},x.clamp=function(u){return arguments.length?(c=u?!0:qe,m()):c!==qe},x.interpolate=function(u){return arguments.length?(n=u,m()):n},x.unknown=function(u){return arguments.length?(l=u,x):l},function(u,E){return r=u,a=E,m()}}function Ml(){return El()(qe,qe)}function kl(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _n(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function We(e){return e=_n(Math.abs(e)),e?e[1]:NaN}function Sl(e,t){return function(n,r){for(var a=n.length,l=[],c=0,f=e[0],v=0;a>0&&f>0&&(v+f+1>r&&(f=Math.max(1,r-v)),l.push(n.substring(a-=f,a+f)),!((v+=f+1)>r));)f=e[c=(c+1)%e.length];return l.reverse().join(t)}}function Nl(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var $l=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function En(e){if(!(t=$l.exec(e)))throw new Error("invalid format: "+e);var t;return new ka({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}En.prototype=ka.prototype;function ka(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ka.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Dl(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var po;function Il(e,t){var n=_n(e,t);if(!n)return e+"";var r=n[0],a=n[1],l=a-(po=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+_n(e,Math.max(0,t+l-1))[0]}function ji(e,t){var n=_n(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const qi={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:kl,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ji(e*100,t),r:ji,s:Il,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Fi(e){return e}var Wi=Array.prototype.map,Ui=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Gl(e){var t=e.grouping===void 0||e.thousands===void 0?Fi:Sl(Wi.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?Fi:Nl(Wi.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",f=e.minus===void 0?"\u2212":e.minus+"",v=e.nan===void 0?"NaN":e.nan+"";function p(x){x=En(x);var u=x.fill,E=x.align,D=x.sign,V=x.symbol,C=x.zero,$=x.width,T=x.comma,O=x.precision,K=x.trim,I=x.type;I==="n"?(T=!0,I="g"):qi[I]||(O===void 0&&(O=12),K=!0,I="g"),(C||u==="0"&&E==="=")&&(C=!0,u="0",E="=");var Q=V==="$"?n:V==="#"&&/[boxX]/.test(I)?"0"+I.toLowerCase():"",be=V==="$"?r:/[%p]/.test(I)?c:"",Ie=qi[I],Ue=/[defgprs%]/.test(I);O=O===void 0?6:/[gprs]/.test(I)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function fe(k){var j=Q,G=be,Z,ye,q;if(I==="c")G=Ie(k)+G,k="";else{k=+k;var ue=k<0||1/k<0;if(k=isNaN(k)?v:Ie(Math.abs(k),O),K&&(k=Dl(k)),ue&&+k==0&&D!=="+"&&(ue=!1),j=(ue?D==="("?D:f:D==="-"||D==="("?"":D)+j,G=(I==="s"?Ui[8+po/3]:"")+G+(ue&&D==="("?")":""),Ue){for(Z=-1,ye=k.length;++Z<ye;)if(q=k.charCodeAt(Z),48>q||q>57){G=(q===46?a+k.slice(Z+1):k.slice(Z))+G,k=k.slice(0,Z);break}}}T&&!C&&(k=t(k,1/0));var J=j.length+k.length+G.length,B=J<$?new Array($-J+1).join(u):"";switch(T&&C&&(k=t(B+k,B.length?$-G.length:1/0),B=""),E){case"<":k=j+k+G+B;break;case"=":k=j+B+k+G;break;case"^":k=B.slice(0,J=B.length>>1)+j+k+G+B.slice(J);break;default:k=B+j+k+G;break}return l(k)}return fe.toString=function(){return x+""},fe}function m(x,u){var E=p((x=En(x),x.type="f",x)),D=Math.max(-8,Math.min(8,Math.floor(We(u)/3)))*3,V=Math.pow(10,-D),C=Ui[8+D/3];return function($){return E(V*$)+C}}return{format:p,formatPrefix:m}}var vn,go,vo;Ol({thousands:",",grouping:[3],currency:["$",""]});function Ol(e){return vn=Gl(e),go=vn.format,vo=vn.formatPrefix,vn}function Vl(e){return Math.max(0,-We(Math.abs(e)))}function Cl(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(We(t)/3)))*3-We(Math.abs(e)))}function Tl(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,We(t)-We(e))+1}function Pl(e,t,n,r){var a=Fo(e,t,n),l;switch(r=En(r==null?",f":r),r.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(l=Cl(a,c))&&(r.precision=l),vo(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=Tl(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=Vl(a))&&(r.precision=l-(r.type==="%")*2);break}}return go(r)}function Ll(e){var t=e.domain;return e.ticks=function(n){var r=t();return qo(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var a=t();return Pl(a[0],a[a.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,l=r.length-1,c=r[a],f=r[l],v,p,m=10;for(f<c&&(p=c,c=f,f=p,p=a,a=l,l=p);m-- >0;){if(p=so(c,f,n),p===v)return r[a]=c,r[l]=f,t(r);if(p>0)c=Math.floor(c/p)*p,f=Math.ceil(f/p)*p;else if(p<0)c=Math.ceil(c*p)/p,f=Math.floor(f*p)/p;else break;v=p}return e},e}function xo(){var e=Ml();return e.copy=function(){return _l(e,xo())},wa.apply(e,arguments),Ll(e)}function Xi(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Yi(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Ki(e,t,n){const r=e.slice();return r[12]=t[n],r}function Hl(e){return{c:P,l:P,m:P,p:P,i:P,o:P,d:P}}function Rl(e){let t,n,r,a=e[1].ticks(),l=[];for(let m=0;m<a.length;m+=1)l[m]=Qi(Ki(e,a,m));let c=e[7],f=[];for(let m=0;m<c.length;m+=1)f[m]=Zi(Yi(e,c,m));let v=e[7],p=[];for(let m=0;m<v.length;m+=1)p[m]=eo(Xi(e,v,m));return{c(){t=U("svg");for(let m=0;m<l.length;m+=1)l[m].c();n=ve();for(let m=0;m<f.length;m+=1)f[m].c();r=ve();for(let m=0;m<p.length;m+=1)p[m].c();this.h()},l(m){t=X(m,"svg",{viewBox:!0});var x=g(t);for(let u=0;u<l.length;u+=1)l[u].l(x);n=ve();for(let u=0;u<f.length;u+=1)f[u].l(x);r=ve();for(let u=0;u<p.length;u+=1)p[u].l(x);x.forEach(s),this.h()},h(){M(t,"viewBox",0-xe+" "+(0-xe)+" "+(Mn+2*xe)+" "+(Sa+2*xe))},m(m,x){w(m,t,x);for(let u=0;u<l.length;u+=1)l[u].m(t,null);o(t,n);for(let u=0;u<f.length;u+=1)f[u].m(t,null);o(t,r);for(let u=0;u<p.length;u+=1)p[u].m(t,null)},p(m,x){if(x&2){a=m[1].ticks();let u;for(u=0;u<a.length;u+=1){const E=Ki(m,a,u);l[u]?(l[u].p(E,x),ge(l[u],1)):(l[u]=Qi(E),l[u].c(),ge(l[u],1),l[u].m(t,n))}for(;u<l.length;u+=1)l[u].d(1);l.length=a.length}if(x&15){c=m[7];let u;for(u=0;u<c.length;u+=1){const E=Yi(m,c,u);f[u]?(f[u].p(E,x),ge(f[u],1)):(f[u]=Zi(E),f[u].c(),ge(f[u],1),f[u].m(t,r))}for(;u<f.length;u+=1)f[u].d(1);f.length=c.length}if(x&15){v=m[7];let u;for(u=0;u<v.length;u+=1){const E=Xi(m,v,u);p[u]?p[u].p(E,x):(p[u]=eo(E),p[u].c(),p[u].m(t,null))}for(;u<p.length;u+=1)p[u].d(1);p.length=v.length}},i(m){for(let x=0;x<a.length;x+=1)ge(l[x]);for(let x=0;x<c.length;x+=1)ge(f[x])},o:P,d(m){m&&s(t),ha(l,m),ha(f,m),ha(p,m)}}}function Qi(e){let t,n,r,a=e[12]+"",l,c;return{c(){t=U("g"),n=U("line"),r=U("text"),l=h(a),this.h()},l(f){t=X(f,"g",{});var v=g(t);n=X(v,"line",{x2:!0,y1:!0,y2:!0,stroke:!0}),g(n).forEach(s),r=X(v,"text",{"text-anchor":!0,"dominant-baseline":!0,dx:!0,y:!0});var p=g(r);l=d(p,a),p.forEach(s),v.forEach(s),this.h()},h(){M(n,"x2",Mn),M(n,"y1",e[1](e[12])),M(n,"y2",e[1](e[12])),M(n,"stroke","grey"),M(r,"text-anchor","end"),M(r,"dominant-baseline","middle"),M(r,"dx","-10"),M(r,"y",e[1](e[12]))},m(f,v){w(f,t,v),o(t,n),o(t,r),o(r,l)},p:P,i(f){c||io(()=>{c=oo(t,Vo,{x:-200,duration:1e3}),c.start()})},o:P,d(f){f&&s(t)}}}function Zi(e){let t,n,r,a;function l(){return e[4](e[10])}function c(){return e[5](e[10])}return{c(){t=U("rect"),this.h()},l(f){t=X(f,"rect",{y:!0,x:!0,width:!0,height:!0,fill:!0}),g(t).forEach(s),this.h()},h(){M(t,"y",e[1](Math.max(0,e[8].amount))),M(t,"x",e[2](e[8].year_of_balance)),M(t,"width",e[2].bandwidth()),M(t,"height",Math.abs(e[1](e[8].amount)-e[1](0))),M(t,"fill",e[8].amount<0?"brown":"steelblue")},m(f,v){w(f,t,v),r||(a=[Di(t,"mouseenter",l),Di(t,"mouseleave",c)],r=!0)},p(f,v){e=f},i(f){n||io(()=>{n=oo(t,Co,{delay:e[10]*80}),n.start()})},o:P,d(f){f&&s(t),r=!1,No(a)}}}function Ji(e){let t,n,r=e[8].year_of_balance+"",a,l,c,f=e[8].amount+"",v,p,m,x=e[8].actual_revised_estimated+"",u,E,D,V=e[8].item+"",C;return{c(){t=U("text"),n=h("Year: "),a=h(r),l=U("text"),c=h("Balance: "),v=h(f),p=U("text"),m=h("Type: "),u=h(x),E=U("text"),D=h("Item: "),C=h(V),this.h()},l($){t=X($,"text",{x:!0,y:!0,"dominant-baseline":!0});var T=g(t);n=d(T,"Year: "),a=d(T,r),T.forEach(s),l=X($,"text",{x:!0,y:!0,"dominant-baseline":!0});var O=g(l);c=d(O,"Balance: "),v=d(O,f),O.forEach(s),p=X($,"text",{x:!0,y:!0,"dominant-baseline":!0});var K=g(p);m=d(K,"Type: "),u=d(K,x),K.forEach(s),E=X($,"text",{x:!0,y:!0,"dominant-baseline":!0});var I=g(E);D=d(I,"Item: "),C=d(I,V),I.forEach(s),this.h()},h(){M(t,"x",e[2](e[8].year_of_balance)),M(t,"y",e[8].amount>0?e[1](e[8].amount)-10:e[1](e[8].amount)+10),M(t,"dominant-baseline",e[8].amount>0?"baseline":"hanging"),M(l,"x",e[2](e[8].year_of_balance)),M(l,"y",e[8].amount>0?e[1](e[8].amount)-24:e[1](e[8].amount)+24),M(l,"dominant-baseline",e[8].amount>0?"baseline":"hanging"),M(p,"x",e[2](e[8].year_of_balance)),M(p,"y",e[8].amount>0?e[1](e[8].amount)-38:e[1](e[8].amount)+38),M(p,"dominant-baseline",e[8].amount>0?"baseline":"hanging"),M(E,"x",e[2](e[8].year_of_balance)),M(E,"y",e[8].amount>0?e[1](e[8].amount)-52:e[1](e[8].amount)+52),M(E,"dominant-baseline",e[8].amount>0?"baseline":"hanging")},m($,T){w($,t,T),o(t,n),o(t,a),w($,l,T),o(l,c),o(l,v),w($,p,T),o(p,m),o(p,u),w($,E,T),o(E,D),o(E,C)},p:P,d($){$&&s(t),$&&s(l),$&&s(p),$&&s(E)}}}function eo(e){let t,n=e[0][e[10]]&&Ji(e);return{c(){n&&n.c(),t=ve()},l(r){n&&n.l(r),t=ve()},m(r,a){n&&n.m(r,a),w(r,t,a)},p(r,a){r[0][r[10]]?n?n.p(r,a):(n=Ji(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&s(t)}}}function zl(e){let t,n,r;return{c(){t=U("svg"),n=U("path"),r=U("animateTransform"),this.h()},l(a){t=X(a,"svg",{viewBox:!0});var l=g(t);n=X(l,"path",{fill:!0,d:!0});var c=g(n);r=X(c,"animateTransform",{attributeName:!0,attributeType:!0,type:!0,dur:!0,from:!0,to:!0,repeatCount:!0}),g(r).forEach(s),c.forEach(s),l.forEach(s),this.h()},h(){M(r,"attributeName","transform"),M(r,"attributeType","XML"),M(r,"type","rotate"),M(r,"dur","1s"),M(r,"from","0 50 50"),M(r,"to","360 50 50"),M(r,"repeatCount","indefinite"),M(n,"fill","black"),M(n,"d","M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"),M(t,"viewBox",0-xe+" "+(0-xe)+" "+(Mn+2*xe)+" "+(Sa+2*xe))},m(a,l){w(a,t,l),o(t,n),o(n,r)},p:P,i:P,o:P,d(a){a&&s(t)}}}function Al(e){let t,n={ctx:e,current:null,token:null,hasCatch:!1,pending:zl,then:Rl,catch:Hl,value:7};return ko(e[3],n),{c(){t=ve(),n.block.c()},l(r){t=ve(),n.block.l(r)},m(r,a){w(r,t,a),n.block.m(r,n.anchor=a),n.mount=()=>t.parentNode,n.anchor=t},p(r,[a]){e=r,So(n,e,a)},i(r){ge(n.block)},o:P,d(r){r&&s(t),n.block.d(r),n.token=null,n=null}}}let xe=100,Sa=600,Mn=800;async function Bl(){const e="https://data.gov.sg/api/action/datastore_search",n={resource_id:"98856a60-33cd-482a-9dc4-1ed52e562d5d",q:"balance"};let r=new URLSearchParams(n);return(await(await fetch(`${e}?${r}`)).json()).result.records}async function jl(e){return(await e).filter(n=>n.item=="Overall Balance")}function ql(e,t,n){let r=xo(),a=uo(),l=null,c=Bl(),f=jl(c).then(m=>{let x=m.map(E=>E.amount),u=m.map(E=>E.year_of_balance);return r.domain([Math.min(...x),Math.max(...x)]).range([Sa,0]),a.domain(u).range([0,Mn]).paddingInner(.1),n(0,l=x.map(()=>!1)),m});return[l,r,a,f,m=>{n(0,l[m]=!0,l)},m=>{n(0,l[m]=!1,l)}]}class Fl extends no{constructor(t){super(),ro(this,t,ql,Al,ao,{})}}function Wl(e){let t,n,r,a,l,c,f,v,p,m,x,u,E,D,V,C,$,T,O,K,I,Q,be,Ie,Ue,fe,k,j,G,Z,ye,q,ue,J,B,zt,Ge,kn,At,we,Sn,Xe,Nn,Bt,Oe,$n,jt,ee,Dn,Ye,In,Gn,Ke,On,Vn,qt,ce,Cn,Qe,Tn,Pn,Ft,he,Ln,Ze,Hn,Rn,Wt,Ve,zn,Ut,Ce,An,Xt,te,Bn,Je,jn,qn,et,Fn,Wn,Yt,_e,bo=`<code class="language-undefined">const interpolateFunction = scaleLinear() // returns a interpolating function
    .domain([0, 10]) // provide the min and max of our data
    .range([0, 200]) // provide the min and max of our SVG coords

interpolateFunction(0) // returns 0
interpolateFunction(5) // returns 100
interpolateFunction(10) // returns 200</code>`,Kt,Te,Un,Qt,H,Xn,tt,Yn,Kn,nt,Qn,Zn,rt,Jn,er,at,tr,nr,Zt,Ee,yo=`<code class="language-undefined">const reverseInterpolate = scaleLinear()
    .domain([0, 10])
    .range([200, 0]) // Note: elements in array has been swapped!

reverseInterpolate(0) // returns 200
reverseInterpolate(5) // returns 100
reverseInterpolate(10) // returns 0</code>`,Jt,R,rr,it,ar,ir,ot,or,lr,lt,sr,fr,st,ur,cr,en,Pe,hr,tn,z,dr,ft,mr,pr,ut,gr,vr,ct,xr,br,ht,yr,wr,nn,Me,wo=`<code class="language-undefined">const categoricalInterpolate = scaleBand()
    .domain([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]) // provide array of your categories
    .range([0, 200]) // provide min and max of your SVG coords
    // optionally set the gaps between bars
    // as a proportion of width of bar, 0 to 1
    reverseInterpolate(yData) - reverseInterpolate(0)
    // optionally set the gaps to the left and right of the first and last bar
    // as a proportion of width of bar, 0 to 1
    .paddingOuter(0.5)

categoricalInterpolate(&#39;a&#39;) // returns position of left side of the &#39;a&#39; bar
categoricalInterpolate.step() // returns the length between start of 2 consecutive bars
categoricalInterpoalte.bandwidth() // returns the width of the bar</code>`,rn,Le,_r,an,L,Er,dt,Mr,kr,mt,Sr,Nr,pt,$r,Dr,gt,Ir,Gr,vt,Or,Vr,on,ne,Cr,xt,Tr,Pr,bt,Lr,Hr,ln,F,ke,yt,Rr,zr,wt,Ar,Br,Se,_t,jr,qr,Et,Fr,Wr,de,Mt,Ur,Xr,kt,Yr,St,le,Kr,Nt,Qr,Zr,$t,Jr,ea,ta,me,Dt,na,ra,It,aa,Gt,se,ia,Ot,oa,la,Vt,sa,fa,sn,Ne,fn;return Ne=new Fl({}),{c(){t=b("h1"),n=h(to),r=S(),a=b("h2"),l=h("SVG fundamentals"),c=S(),f=b("p"),v=h("SVG provides elements that describe shapes / curves, similar to how HTML provides elements that describe headers, paragraphs."),p=S(),m=b("p"),x=h("SVG document starts with "),u=b("code"),E=h("<svg>"),D=h(" root element, and within it you can put various shape elements, and group those together using "),V=b("code"),C=h("<g>"),$=h(" element."),T=S(),O=b("p"),K=h("SVG is actually an XML language, and therefore:"),I=S(),Q=b("ul"),be=b("li"),Ie=h("elements and attributes are case sensitive"),Ue=S(),fe=b("li"),k=h("attribute values must be inside quotes even if they are numbers."),j=S(),G=b("h3"),Z=h("SVG coordinate system"),ye=S(),q=b("p"),ue=h("The origin(0,0) starts at the "),J=b("strong"),B=h("top left"),zt=S(),Ge=b("p"),kn=h("The horizontal axis runs from left to right"),At=S(),we=b("p"),Sn=h("The vertical axis runs from "),Xe=b("strong"),Nn=h("top to bottom"),Bt=S(),Oe=b("h3"),$n=h("SVG viewbox"),jt=S(),ee=b("p"),Dn=h(`The unit of measurement in the SVG coordinates is by default 1unit = 1px of the device\u2019s screen.
However, since SVG is scalable, we can change the `),Ye=b("em"),In=h("viewbox"),Gn=h(" attribute of "),Ke=b("code"),On=h("<svg>"),Vn=h(" to (automatically) map SVG\u2019s 1 unit to however big the screen size is."),qt=S(),ce=b("p"),Cn=h("For example, defining a SVG canvas: "),Qe=b("code"),Tn=h('<svg viewBox="0 0 200 200">'),Pn=h(". This translates to setting canvas top left corner to (0,0) and the canvas width and height to be 200. Say the canvas is displayed in a 1000px by 1000px screen, then 1 unit in SVG = 5 px on screen."),Ft=S(),he=b("p"),Ln=h("This is useful because you can fix the coordinates of the viewBox, allowing the SVG element sizes to be "),Ze=b("em"),Hn=h("relative"),Rn=h(" to the viewBox you defined, letting it scale to any screen size."),Wt=S(),Ve=b("h3"),zn=h("mapping data values to SVG unit values"),Ut=S(),Ce=b("p"),An=h(`Now we need a way to map the values in our data to the SVG\u2019s coordinate system.
For example, say our data consists of numbers from 0 to 10, and our SVG\u2019s coordinate system is defined as 0 to 200 pixels. We will need to map the 0 in our data to 0 pixel in SVG, and 5 in our data to 100 pixel in SVG, etc.`),Xt=S(),te=b("p"),Bn=h("To do this, "),Je=b("code"),jn=h("d3-scale"),qn=h(" library has a lot of helper functions that can help us generate this mapping function. Specifically, "),et=b("code"),Fn=h("scaleLinear"),Wn=h(" helps returns a linearly interpolating function that maps values between our data and the SVG coordinate."),Yt=S(),_e=b("pre"),Kt=S(),Te=b("h3"),Un=h("vertical axis: inverted"),Qt=S(),H=b("p"),Xn=h(`Above works fine for horizontal axis, but vertical axis is inverted in SVG.
In other words, the `),tt=b("strong"),Yn=h("larger"),Kn=h(" the y value, the "),nt=b("strong"),Qn=h("lower"),Zn=h(` the point will be shown inside the SVG.
This is not how normal charts work.
Luckily there is an easy trick to solve this using `),rt=b("code"),Jn=h("scaleLinear()"),er=h(": reverse arguments in "),at=b("code"),tr=h(".range()"),nr=h(" method!"),Zt=S(),Ee=b("pre"),Jt=S(),R=b("p"),rr=h("By just swapping the elements in the "),it=b("code"),ar=h(".range()"),ir=h(" method, the returned "),ot=b("code"),or=h("reverseInerpolate"),lr=h(" function now maps "),lt=b("strong"),sr=h("larger"),fr=h(" y value to a "),st=b("strong"),ur=h("higher"),cr=h(" point inside the SVG."),en=S(),Pe=b("h3"),hr=h("horizontal axis: cateogories"),tn=S(),z=b("p"),dr=h("Horizontal axis for bar charts are usually categorical variables. This means using "),ft=b("code"),mr=h("scaleLinear()"),pr=h(` does not make sense.
`),ut=b("code"),gr=h("d3-scale"),vr=h(" provides another helper function, "),ct=b("code"),xr=h("scaleBand()"),br=h(` that will help us interpolate the horizontal positions of the bars.
The returned function will give us the horizontal position of the `),ht=b("em"),yr=h("left"),wr=h(" side of the bar (i.e. the start of the bar)"),nn=S(),Me=b("pre"),rn=S(),Le=b("h3"),_r=h("drawing bars"),an=S(),L=b("p"),Er=h("We can draw bars with "),dt=b("code"),Mr=h("<rect>"),kr=h(` svg element.
This element requires us to specify the rectangle\u2019s top left position `),mt=b("code"),Sr=h("x"),Nr=h(" and "),pt=b("code"),$r=h("y"),Dr=h(", the "),gt=b("code"),Ir=h("height"),Gr=h(" (how far down), and the "),vt=b("code"),Or=h("width"),Vr=h(" (how far right)."),on=S(),ne=b("p"),Cr=h("We can determine the 4 properties for each data point "),xt=b("code"),Tr=h("(xData, yData)"),Pr=h(" with the two "),bt=b("code"),Lr=h("d3-scale"),Hr=h(" interpolating functions we have created:"),ln=S(),F=b("ul"),ke=b("li"),yt=b("code"),Rr=h("x"),zr=h(" = "),wt=b("code"),Ar=h("categoricalInterpolate(xData)"),Br=S(),Se=b("li"),_t=b("code"),jr=h("width"),qr=h(" = "),Et=b("code"),Fr=h("categoricalInterpolate.bandwidth()"),Wr=S(),de=b("li"),Mt=b("code"),Ur=h("y"),Xr=h(" = "),kt=b("code"),Yr=h("reverseInterpolate(yData)"),St=b("ul"),le=b("li"),Kr=h("to handle negative "),Nt=b("code"),Qr=h("yData"),Zr=h(", use "),$t=b("code"),Jr=h("reverseInterpolate(Math.max(0, yData))"),ea=h(" to get the yData position if its positive, or the x-axis position if yData is negative"),ta=S(),me=b("li"),Dt=b("code"),na=h("height"),ra=h(" = "),It=b("code"),aa=h("reverseInterpolate(yData) - reverseInterpolate(0)"),Gt=b("ul"),se=b("li"),ia=h("to handle negative "),Ot=b("code"),oa=h("yData"),la=h(", use "),Vt=b("code"),sa=h("Math.abs(reverseInterpolate(yData) - reverseInterpolate(0))"),fa=h(" to get distance between tip of bar and x-axis"),sn=S(),$o(Ne.$$.fragment),this.h()},l(i){t=y(i,"H1",{});var _=g(t);n=d(_,to),_.forEach(s),r=N(i),a=y(i,"H2",{});var Na=g(a);l=d(Na,"SVG fundamentals"),Na.forEach(s),c=N(i),f=y(i,"P",{});var $a=g(f);v=d($a,"SVG provides elements that describe shapes / curves, similar to how HTML provides elements that describe headers, paragraphs."),$a.forEach(s),p=N(i),m=y(i,"P",{});var He=g(m);x=d(He,"SVG document starts with "),u=y(He,"CODE",{});var Da=g(u);E=d(Da,"<svg>"),Da.forEach(s),D=d(He," root element, and within it you can put various shape elements, and group those together using "),V=y(He,"CODE",{});var Ia=g(V);C=d(Ia,"<g>"),Ia.forEach(s),$=d(He," element."),He.forEach(s),T=N(i),O=y(i,"P",{});var Ga=g(O);K=d(Ga,"SVG is actually an XML language, and therefore:"),Ga.forEach(s),I=N(i),Q=y(i,"UL",{});var un=g(Q);be=y(un,"LI",{});var Oa=g(be);Ie=d(Oa,"elements and attributes are case sensitive"),Oa.forEach(s),Ue=N(un),fe=y(un,"LI",{});var Va=g(fe);k=d(Va,"attribute values must be inside quotes even if they are numbers."),Va.forEach(s),un.forEach(s),j=N(i),G=y(i,"H3",{});var Ca=g(G);Z=d(Ca,"SVG coordinate system"),Ca.forEach(s),ye=N(i),q=y(i,"P",{});var ua=g(q);ue=d(ua,"The origin(0,0) starts at the "),J=y(ua,"STRONG",{});var Ta=g(J);B=d(Ta,"top left"),Ta.forEach(s),ua.forEach(s),zt=N(i),Ge=y(i,"P",{});var Pa=g(Ge);kn=d(Pa,"The horizontal axis runs from left to right"),Pa.forEach(s),At=N(i),we=y(i,"P",{});var ca=g(we);Sn=d(ca,"The vertical axis runs from "),Xe=y(ca,"STRONG",{});var La=g(Xe);Nn=d(La,"top to bottom"),La.forEach(s),ca.forEach(s),Bt=N(i),Oe=y(i,"H3",{});var Ha=g(Oe);$n=d(Ha,"SVG viewbox"),Ha.forEach(s),jt=N(i),ee=y(i,"P",{});var Re=g(ee);Dn=d(Re,`The unit of measurement in the SVG coordinates is by default 1unit = 1px of the device\u2019s screen.
However, since SVG is scalable, we can change the `),Ye=y(Re,"EM",{});var Ra=g(Ye);In=d(Ra,"viewbox"),Ra.forEach(s),Gn=d(Re," attribute of "),Ke=y(Re,"CODE",{});var za=g(Ke);On=d(za,"<svg>"),za.forEach(s),Vn=d(Re," to (automatically) map SVG\u2019s 1 unit to however big the screen size is."),Re.forEach(s),qt=N(i),ce=y(i,"P",{});var cn=g(ce);Cn=d(cn,"For example, defining a SVG canvas: "),Qe=y(cn,"CODE",{});var Aa=g(Qe);Tn=d(Aa,'<svg viewBox="0 0 200 200">'),Aa.forEach(s),Pn=d(cn,". This translates to setting canvas top left corner to (0,0) and the canvas width and height to be 200. Say the canvas is displayed in a 1000px by 1000px screen, then 1 unit in SVG = 5 px on screen."),cn.forEach(s),Ft=N(i),he=y(i,"P",{});var hn=g(he);Ln=d(hn,"This is useful because you can fix the coordinates of the viewBox, allowing the SVG element sizes to be "),Ze=y(hn,"EM",{});var Ba=g(Ze);Hn=d(Ba,"relative"),Ba.forEach(s),Rn=d(hn," to the viewBox you defined, letting it scale to any screen size."),hn.forEach(s),Wt=N(i),Ve=y(i,"H3",{});var ja=g(Ve);zn=d(ja,"mapping data values to SVG unit values"),ja.forEach(s),Ut=N(i),Ce=y(i,"P",{});var qa=g(Ce);An=d(qa,`Now we need a way to map the values in our data to the SVG\u2019s coordinate system.
For example, say our data consists of numbers from 0 to 10, and our SVG\u2019s coordinate system is defined as 0 to 200 pixels. We will need to map the 0 in our data to 0 pixel in SVG, and 5 in our data to 100 pixel in SVG, etc.`),qa.forEach(s),Xt=N(i),te=y(i,"P",{});var ze=g(te);Bn=d(ze,"To do this, "),Je=y(ze,"CODE",{});var Fa=g(Je);jn=d(Fa,"d3-scale"),Fa.forEach(s),qn=d(ze," library has a lot of helper functions that can help us generate this mapping function. Specifically, "),et=y(ze,"CODE",{});var Wa=g(et);Fn=d(Wa,"scaleLinear"),Wa.forEach(s),Wn=d(ze," helps returns a linearly interpolating function that maps values between our data and the SVG coordinate."),ze.forEach(s),Yt=N(i),_e=y(i,"PRE",{class:!0});var _o=g(_e);_o.forEach(s),Kt=N(i),Te=y(i,"H3",{});var Ua=g(Te);Un=d(Ua,"vertical axis: inverted"),Ua.forEach(s),Qt=N(i),H=y(i,"P",{});var re=g(H);Xn=d(re,`Above works fine for horizontal axis, but vertical axis is inverted in SVG.
In other words, the `),tt=y(re,"STRONG",{});var Xa=g(tt);Yn=d(Xa,"larger"),Xa.forEach(s),Kn=d(re," the y value, the "),nt=y(re,"STRONG",{});var Ya=g(nt);Qn=d(Ya,"lower"),Ya.forEach(s),Zn=d(re,` the point will be shown inside the SVG.
This is not how normal charts work.
Luckily there is an easy trick to solve this using `),rt=y(re,"CODE",{});var Ka=g(rt);Jn=d(Ka,"scaleLinear()"),Ka.forEach(s),er=d(re,": reverse arguments in "),at=y(re,"CODE",{});var Qa=g(at);tr=d(Qa,".range()"),Qa.forEach(s),nr=d(re," method!"),re.forEach(s),Zt=N(i),Ee=y(i,"PRE",{class:!0});var Eo=g(Ee);Eo.forEach(s),Jt=N(i),R=y(i,"P",{});var ae=g(R);rr=d(ae,"By just swapping the elements in the "),it=y(ae,"CODE",{});var Za=g(it);ar=d(Za,".range()"),Za.forEach(s),ir=d(ae," method, the returned "),ot=y(ae,"CODE",{});var Ja=g(ot);or=d(Ja,"reverseInerpolate"),Ja.forEach(s),lr=d(ae," function now maps "),lt=y(ae,"STRONG",{});var ei=g(lt);sr=d(ei,"larger"),ei.forEach(s),fr=d(ae," y value to a "),st=y(ae,"STRONG",{});var ti=g(st);ur=d(ti,"higher"),ti.forEach(s),cr=d(ae," point inside the SVG."),ae.forEach(s),en=N(i),Pe=y(i,"H3",{});var ni=g(Pe);hr=d(ni,"horizontal axis: cateogories"),ni.forEach(s),tn=N(i),z=y(i,"P",{});var ie=g(z);dr=d(ie,"Horizontal axis for bar charts are usually categorical variables. This means using "),ft=y(ie,"CODE",{});var ri=g(ft);mr=d(ri,"scaleLinear()"),ri.forEach(s),pr=d(ie,` does not make sense.
`),ut=y(ie,"CODE",{});var ai=g(ut);gr=d(ai,"d3-scale"),ai.forEach(s),vr=d(ie," provides another helper function, "),ct=y(ie,"CODE",{});var ii=g(ct);xr=d(ii,"scaleBand()"),ii.forEach(s),br=d(ie,` that will help us interpolate the horizontal positions of the bars.
The returned function will give us the horizontal position of the `),ht=y(ie,"EM",{});var oi=g(ht);yr=d(oi,"left"),oi.forEach(s),wr=d(ie," side of the bar (i.e. the start of the bar)"),ie.forEach(s),nn=N(i),Me=y(i,"PRE",{class:!0});var Mo=g(Me);Mo.forEach(s),rn=N(i),Le=y(i,"H3",{});var li=g(Le);_r=d(li,"drawing bars"),li.forEach(s),an=N(i),L=y(i,"P",{});var W=g(L);Er=d(W,"We can draw bars with "),dt=y(W,"CODE",{});var si=g(dt);Mr=d(si,"<rect>"),si.forEach(s),kr=d(W,` svg element.
This element requires us to specify the rectangle\u2019s top left position `),mt=y(W,"CODE",{});var fi=g(mt);Sr=d(fi,"x"),fi.forEach(s),Nr=d(W," and "),pt=y(W,"CODE",{});var ui=g(pt);$r=d(ui,"y"),ui.forEach(s),Dr=d(W,", the "),gt=y(W,"CODE",{});var ci=g(gt);Ir=d(ci,"height"),ci.forEach(s),Gr=d(W," (how far down), and the "),vt=y(W,"CODE",{});var hi=g(vt);Or=d(hi,"width"),hi.forEach(s),Vr=d(W," (how far right)."),W.forEach(s),on=N(i),ne=y(i,"P",{});var Ae=g(ne);Cr=d(Ae,"We can determine the 4 properties for each data point "),xt=y(Ae,"CODE",{});var di=g(xt);Tr=d(di,"(xData, yData)"),di.forEach(s),Pr=d(Ae," with the two "),bt=y(Ae,"CODE",{});var mi=g(bt);Lr=d(mi,"d3-scale"),mi.forEach(s),Hr=d(Ae," interpolating functions we have created:"),Ae.forEach(s),ln=N(i),F=y(i,"UL",{});var pe=g(F);ke=y(pe,"LI",{});var dn=g(ke);yt=y(dn,"CODE",{});var pi=g(yt);Rr=d(pi,"x"),pi.forEach(s),zr=d(dn," = "),wt=y(dn,"CODE",{});var gi=g(wt);Ar=d(gi,"categoricalInterpolate(xData)"),gi.forEach(s),dn.forEach(s),Br=N(pe),Se=y(pe,"LI",{});var mn=g(Se);_t=y(mn,"CODE",{});var vi=g(_t);jr=d(vi,"width"),vi.forEach(s),qr=d(mn," = "),Et=y(mn,"CODE",{});var xi=g(Et);Fr=d(xi,"categoricalInterpolate.bandwidth()"),xi.forEach(s),mn.forEach(s),Wr=N(pe),de=y(pe,"LI",{});var Ct=g(de);Mt=y(Ct,"CODE",{});var bi=g(Mt);Ur=d(bi,"y"),bi.forEach(s),Xr=d(Ct," = "),kt=y(Ct,"CODE",{});var yi=g(kt);Yr=d(yi,"reverseInterpolate(yData)"),yi.forEach(s),St=y(Ct,"UL",{});var wi=g(St);le=y(wi,"LI",{});var Be=g(le);Kr=d(Be,"to handle negative "),Nt=y(Be,"CODE",{});var _i=g(Nt);Qr=d(_i,"yData"),_i.forEach(s),Zr=d(Be,", use "),$t=y(Be,"CODE",{});var Ei=g($t);Jr=d(Ei,"reverseInterpolate(Math.max(0, yData))"),Ei.forEach(s),ea=d(Be," to get the yData position if its positive, or the x-axis position if yData is negative"),Be.forEach(s),wi.forEach(s),Ct.forEach(s),ta=N(pe),me=y(pe,"LI",{});var Tt=g(me);Dt=y(Tt,"CODE",{});var Mi=g(Dt);na=d(Mi,"height"),Mi.forEach(s),ra=d(Tt," = "),It=y(Tt,"CODE",{});var ki=g(It);aa=d(ki,"reverseInterpolate(yData) - reverseInterpolate(0)"),ki.forEach(s),Gt=y(Tt,"UL",{});var Si=g(Gt);se=y(Si,"LI",{});var je=g(se);ia=d(je,"to handle negative "),Ot=y(je,"CODE",{});var Ni=g(Ot);oa=d(Ni,"yData"),Ni.forEach(s),la=d(je,", use "),Vt=y(je,"CODE",{});var $i=g(Vt);sa=d($i,"Math.abs(reverseInterpolate(yData) - reverseInterpolate(0))"),$i.forEach(s),fa=d(je," to get distance between tip of bar and x-axis"),je.forEach(s),Si.forEach(s),Tt.forEach(s),pe.forEach(s),sn=N(i),Do(Ne.$$.fragment,i),this.h()},h(){M(_e,"class","language-undefined"),M(Ee,"class","language-undefined"),M(Me,"class","language-undefined")},m(i,_){w(i,t,_),o(t,n),w(i,r,_),w(i,a,_),o(a,l),w(i,c,_),w(i,f,_),o(f,v),w(i,p,_),w(i,m,_),o(m,x),o(m,u),o(u,E),o(m,D),o(m,V),o(V,C),o(m,$),w(i,T,_),w(i,O,_),o(O,K),w(i,I,_),w(i,Q,_),o(Q,be),o(be,Ie),o(Q,Ue),o(Q,fe),o(fe,k),w(i,j,_),w(i,G,_),o(G,Z),w(i,ye,_),w(i,q,_),o(q,ue),o(q,J),o(J,B),w(i,zt,_),w(i,Ge,_),o(Ge,kn),w(i,At,_),w(i,we,_),o(we,Sn),o(we,Xe),o(Xe,Nn),w(i,Bt,_),w(i,Oe,_),o(Oe,$n),w(i,jt,_),w(i,ee,_),o(ee,Dn),o(ee,Ye),o(Ye,In),o(ee,Gn),o(ee,Ke),o(Ke,On),o(ee,Vn),w(i,qt,_),w(i,ce,_),o(ce,Cn),o(ce,Qe),o(Qe,Tn),o(ce,Pn),w(i,Ft,_),w(i,he,_),o(he,Ln),o(he,Ze),o(Ze,Hn),o(he,Rn),w(i,Wt,_),w(i,Ve,_),o(Ve,zn),w(i,Ut,_),w(i,Ce,_),o(Ce,An),w(i,Xt,_),w(i,te,_),o(te,Bn),o(te,Je),o(Je,jn),o(te,qn),o(te,et),o(et,Fn),o(te,Wn),w(i,Yt,_),w(i,_e,_),_e.innerHTML=bo,w(i,Kt,_),w(i,Te,_),o(Te,Un),w(i,Qt,_),w(i,H,_),o(H,Xn),o(H,tt),o(tt,Yn),o(H,Kn),o(H,nt),o(nt,Qn),o(H,Zn),o(H,rt),o(rt,Jn),o(H,er),o(H,at),o(at,tr),o(H,nr),w(i,Zt,_),w(i,Ee,_),Ee.innerHTML=yo,w(i,Jt,_),w(i,R,_),o(R,rr),o(R,it),o(it,ar),o(R,ir),o(R,ot),o(ot,or),o(R,lr),o(R,lt),o(lt,sr),o(R,fr),o(R,st),o(st,ur),o(R,cr),w(i,en,_),w(i,Pe,_),o(Pe,hr),w(i,tn,_),w(i,z,_),o(z,dr),o(z,ft),o(ft,mr),o(z,pr),o(z,ut),o(ut,gr),o(z,vr),o(z,ct),o(ct,xr),o(z,br),o(z,ht),o(ht,yr),o(z,wr),w(i,nn,_),w(i,Me,_),Me.innerHTML=wo,w(i,rn,_),w(i,Le,_),o(Le,_r),w(i,an,_),w(i,L,_),o(L,Er),o(L,dt),o(dt,Mr),o(L,kr),o(L,mt),o(mt,Sr),o(L,Nr),o(L,pt),o(pt,$r),o(L,Dr),o(L,gt),o(gt,Ir),o(L,Gr),o(L,vt),o(vt,Or),o(L,Vr),w(i,on,_),w(i,ne,_),o(ne,Cr),o(ne,xt),o(xt,Tr),o(ne,Pr),o(ne,bt),o(bt,Lr),o(ne,Hr),w(i,ln,_),w(i,F,_),o(F,ke),o(ke,yt),o(yt,Rr),o(ke,zr),o(ke,wt),o(wt,Ar),o(F,Br),o(F,Se),o(Se,_t),o(_t,jr),o(Se,qr),o(Se,Et),o(Et,Fr),o(F,Wr),o(F,de),o(de,Mt),o(Mt,Ur),o(de,Xr),o(de,kt),o(kt,Yr),o(de,St),o(St,le),o(le,Kr),o(le,Nt),o(Nt,Qr),o(le,Zr),o(le,$t),o($t,Jr),o(le,ea),o(F,ta),o(F,me),o(me,Dt),o(Dt,na),o(me,ra),o(me,It),o(It,aa),o(me,Gt),o(Gt,se),o(se,ia),o(se,Ot),o(Ot,oa),o(se,la),o(se,Vt),o(Vt,sa),o(se,fa),w(i,sn,_),Io(Ne,i,_),fn=!0},p:P,i(i){fn||(ge(Ne.$$.fragment,i),fn=!0)},o(i){Go(Ne.$$.fragment,i),fn=!1},d(i){i&&s(t),i&&s(r),i&&s(a),i&&s(c),i&&s(f),i&&s(p),i&&s(m),i&&s(T),i&&s(O),i&&s(I),i&&s(Q),i&&s(j),i&&s(G),i&&s(ye),i&&s(q),i&&s(zt),i&&s(Ge),i&&s(At),i&&s(we),i&&s(Bt),i&&s(Oe),i&&s(jt),i&&s(ee),i&&s(qt),i&&s(ce),i&&s(Ft),i&&s(he),i&&s(Wt),i&&s(Ve),i&&s(Ut),i&&s(Ce),i&&s(Xt),i&&s(te),i&&s(Yt),i&&s(_e),i&&s(Kt),i&&s(Te),i&&s(Qt),i&&s(H),i&&s(Zt),i&&s(Ee),i&&s(Jt),i&&s(R),i&&s(en),i&&s(Pe),i&&s(tn),i&&s(z),i&&s(nn),i&&s(Me),i&&s(rn),i&&s(Le),i&&s(an),i&&s(L),i&&s(on),i&&s(ne),i&&s(ln),i&&s(F),i&&s(sn),Oo(Ne,i)}}}const Ul={title:"Drawing a Bar Chart",date:"2022-10-19"},{title:to,date:Kl}=Ul;class Ql extends no{constructor(t){super(),ro(this,t,null,Wl,ao,{})}}export{Ql as default,Ul as metadata};
